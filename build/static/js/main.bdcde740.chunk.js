(this["webpackJsonpbuildspace-solana"]=this["webpackJsonpbuildspace-solana"]||[]).push([[0],{112:function(e,t){},113:function(e,t){},135:function(e,t,n){"use strict";n.r(t);var c=n(20),r=n.n(c),a=n(79),s=n.n(a),i=(n(85),n(3)),o=n(10),u=n(1),l=n.n(u),f=n(56),p=n(28),b=(n(77),n(44)),d=n(15),m=function(e){var t=e.gifList,n=e.createGifAccount,r=e.handleGifSubmit,a=Object(c.useState)(""),s=Object(o.a)(a,2),i=s[0],u=s[1];return null===t?Object(d.jsx)("div",{className:"connected-container",children:Object(d.jsx)("button",{className:"cta-button submit-gif-button",onClick:n,children:"Do One-Time Initialization For GIF Program Account"})}):Object(d.jsxs)("div",{className:"connected-container",children:[Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(i,u)},children:[Object(d.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:i,onChange:function(e){return u(e.target.value)}}),Object(d.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"Submit"})]}),Object(d.jsx)("div",{className:"gif-grid",children:t.map((function(e,t){return Object(d.jsx)("div",{className:"gif-item",children:Object(d.jsx)("img",{src:e.gifLink,alt:e.gifLink})},t)}))})]})},g=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=window,!(c=n.solana)){e.next=13;break}if(!c.isPhantom){e.next=12;break}return console.log("Phantom Wallet has been found!"),e.next=7,c.connect({onlyIfTrusted:!0});case 7:r=e.sent,console.log("connected with public key",r.publicKey.toString()),t(r.publicKey.toString()),e.next=13;break;case 12:alert("Solana object not found! Get a Phantom Wallet");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(l.a.mark((function e(t){var n,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=window,!(c=n.solana)){e.next=7;break}return e.next=4,c.connect();case 4:r=e.sent,console.log("Connected with Public Key:",r.publicKey.toString()),t(r.publicKey.toString());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=n(80),v=p.c.SystemProgram,y=(p.c.KeyPair,Object.values(h._keypair.secretKey)),x=new Uint8Array(y),O=p.c.Keypair.fromSecretKey(x),w=new f.b(b.metadata.address),k=Object(f.c)("devnet"),S="processed",K=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(o.a)(a,2),u=s[0],h=s[1],y=function(){var e=new f.a(k,S);return new p.b(e,window.solana,S)},x=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=y(),n=new p.a(b,w,t),e.next=5,n.account.baseAccount.fetch(O.publicKey);case 5:c=e.sent,console.log("retrieved account",c),h(c.gifList),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("error in getGifList: ",e.t0),h(null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=y(),n=new p.a(b,w,t),console.log("ping"),e.next=6,n.rpc.startStuffOff({accounts:{baseAccount:O.publicKey,user:t.wallet.publicKey,systemProgram:v.programId},signers:[O]});case 6:return console.log("Created a new BaseAccount w/ address:",O.publicKey.toString()),e.next=9,x();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error creating BaseAccount account:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(l.a.mark((function e(t,n){var c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=3;break}return console.log("no link provided"),e.abrupt("return");case 3:return n(""),console.log("gif link:",t),e.prev=5,c=y(),r=new p.a(b,w,c),e.next=10,r.rpc.addGif(t,{accounts:{baseAccount:O.publicKey,user:c.wallet.publicKey}});case 10:return console.log("Gif successfully sent to the program",t),e.next=13,x();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.log("Error sending Gif: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){var e=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("load",e),function(){return window.removeEventListener("load",e)}}),[]),Object(c.useEffect)((function(){n&&(console.log("Fetching GIF list"),x())}),[n]),Object(d.jsx)("div",{className:"App",children:Object(d.jsx)("div",{className:n?"authed-container":"container",children:Object(d.jsxs)("div",{className:"header-container",children:[Object(d.jsx)("p",{className:"header",children:"The Rick & Mortyverse"}),Object(d.jsx)("p",{className:"sub-text",children:"The Home of Rick & Morty GIFS in the metaverse"}),!n&&Object(d.jsx)("button",{className:"cta-button connect-wallet button",onClick:function(){return j(r)},children:"Connect to Wallet"}),n&&Object(d.jsx)(m,{gifList:u,createGifAccount:K,handleGifSubmit:A})]})})})};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root"))},44:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"solanaproject","instructions":[{"name":"startStuffOff","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"}]}}],"metadata":{"address":"grp6AZmNGrdgf2fnsboA8YqKfieAvxcb1dgay1ZaJUa"}}')},77:function(e,t,n){},80:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":117,"1":241,"2":12,"3":131,"4":9,"5":40,"6":238,"7":26,"8":146,"9":126,"10":128,"11":85,"12":83,"13":110,"14":174,"15":30,"16":248,"17":30,"18":217,"19":237,"20":170,"21":117,"22":87,"23":202,"24":174,"25":128,"26":199,"27":215,"28":37,"29":104,"30":17,"31":49},"secretKey":{"0":101,"1":65,"2":76,"3":194,"4":78,"5":146,"6":102,"7":171,"8":235,"9":190,"10":131,"11":215,"12":103,"13":27,"14":134,"15":98,"16":188,"17":137,"18":30,"19":49,"20":149,"21":38,"22":117,"23":241,"24":229,"25":175,"26":200,"27":71,"28":181,"29":38,"30":17,"31":160,"32":117,"33":241,"34":12,"35":131,"36":9,"37":40,"38":238,"39":26,"40":146,"41":126,"42":128,"43":85,"44":83,"45":110,"46":174,"47":30,"48":248,"49":30,"50":217,"51":237,"52":170,"53":117,"54":87,"55":202,"56":174,"57":128,"58":199,"59":215,"60":37,"61":104,"62":17,"63":49}}}')},85:function(e,t,n){},87:function(e,t){},90:function(e,t){}},[[135,1,2]]]);
//# sourceMappingURL=main.bdcde740.chunk.js.map